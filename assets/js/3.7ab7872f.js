(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1026:function(t,s,r){"use strict";r.r(s);var e=r(119),a=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"setup-aws-nginx-php-https-ubuntu-18-all-free"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setup-aws-nginx-php-https-ubuntu-18-all-free"}},[t._v("#")]),t._v(" "),e("i",{staticClass:"fa fa-baby"}),t._v("  Setup : aws nginx php https ubuntu 18 all free")]),t._v(" "),e("p",[t._v("최근 php 의 slim framework 를 이용 해서 간단하게 rest api 서버를 구축하고 "),e("a",{attrs:{href:"https://goodsaem.github.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://goodsaem.github.io"),e("OutboundLink")],1),t._v(" 에서 rest api\n서버에 json 형태의 문자를 보내서 데이터를 등록하고 조회하는 서비스를 만들었습니다. 로컬환경에서 테스트 할때는 문제가 없었지만 github 에 올리고 나서는 해당 예제가 동작하지\n않았습니다. 그래서 크롬 개발자 도구를 열어 콘솔을 에러 로그를 보니 https 프로토콜을 사용하는 사이트에서 http로 데이터를 요청또는 보내게 되면 웹브라우저 보안 정책으로\n차단시킨다고 합니다. 열심히 구글링해서 혼합 프로토콜을 사용할수 있는 방법을 찾아보았지만 해결방법을 찾을수 없었습니다.")]),t._v(" "),e("p",[e("img",{attrs:{src:r(913),alt:"problem"}})]),t._v(" "),e("p",[t._v("생각해보면 당연한것 같아요 https로 보안성이 높은 웹사이트를 접속이 되어 있다가 보안이 확보되지 않은 http 프로토콜로 데이터를 보낼수 있다면 보안상 문제가 될수 있겠네요."),e("br"),t._v("\n그래서 https 를 제공해 주는 서버를 구축했습니다.")]),t._v(" "),e("h2",{attrs:{id:"_1-condition"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-condition"}},[t._v("#")]),t._v(" 1. Condition")]),t._v(" "),e("p",[t._v("서버를 구축할때 아래의 조건에 맞게 구축되어야 된다는 원칙을 정하고 방법을 찾았습니다.")]),t._v(" "),e("ul",[e("li",[t._v("비용이 발생하면 안됩니다.")]),t._v(" "),e("li",[t._v("완벽하게 https 를 지원해 주어야 됩니다.")]),t._v(" "),e("li",[t._v("php 도 실행가능하고 spring 도 지원가능해야 됩니다.")]),t._v(" "),e("li",[t._v("구축해야 되는 서버는 오로지 https://goodsaem.github.io 사이트에서 요청한 데이터만 응답해야 됩니다.")]),t._v(" "),e("li",[t._v("db 도 사용할수 있어야 됩니다.")])]),t._v(" "),e("p",[t._v("이런 조건을 맞추기 위해서는 "),e("strong",[t._v("aws 서버 구축")]),t._v("이 정답이였습니다. 1년간 프리티어로 무료로 사용할수 있기에 회원가입을 하고 신용카드를\n등록하여 프리티어 서버를 구축했습니다.")]),t._v(" "),e("h2",{attrs:{id:"_2-architecture"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-architecture"}},[t._v("#")]),t._v(" 2. Architecture")]),t._v(" "),e("ol",[e("li",[t._v("사용자가 브라우저를 통해서 "),e("a",{attrs:{href:"https://goodsaem.github.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://goodsaem.github.io"),e("OutboundLink")],1),t._v(" 를 접속합니다.")]),t._v(" "),e("li",[t._v("데이터를 저장하거나 데이터를 db 조회가 필요한경우 "),e("a",{attrs:{href:"https://goodsaem.duckdns.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://goodsaem.duckdns.org"),e("OutboundLink")],1),t._v(" 로 rest api를 호출합니다.\n"),e("ul",[e("li",[e("a",{attrs:{href:"https://goodsaem.duckdns.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://goodsaem.duckdns.org"),e("OutboundLink")],1),t._v(" aws 프리티어 서버에 구축되어 있습니다.")]),t._v(" "),e("li",[t._v("https://goodsaem.github.io 에서 오는 요청 및  localhost에서 실행한 요청에 대해서만 허용하고 나머지는 거부합니다.")])])]),t._v(" "),e("li",[t._v("nginx 웹서버는 https://goodsaem.github.io 에서 호출한 요청에 대해서만 응답하고 나머지 요청은 전부 거부하도록 설정합니다.")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://goodsaem.duckdns.org/php/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://goodsaem.duckdns.org/php/"),e("OutboundLink")],1),t._v(" 아래의 하위 요청은 모두 php가 동작하도록 라우팅 하고\n"),e("a",{attrs:{href:"https://goodsaem.duckdns.org/spring/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://goodsaem.duckdns.org/spring/"),e("OutboundLink")],1),t._v(" 으로 오는 요청은 spring boot가 응답하도록 설정합니다.")]),t._v(" "),e("li",[t._v("db는 mariadb를 사용하며 php spring에서 데이터 crud가 필요한 경우 동작하도록 설계합니다.")])]),t._v(" "),e("p",[e("img",{attrs:{src:r(914),alt:"problem"}})]),t._v(" "),e("p",[t._v("우선 서버 셋업이 완료되고 나서 ssl 수준이 얼마나 되는지 체크하는 사이트"),e("a",{attrs:{href:"https://www.ssllabs.com/ssltest/analyze.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.ssllabs.com/ssltest/analyze.html"),e("OutboundLink")],1),t._v("에 점검한 결과 입니다.\n자세한 내용은 모르겠지만 A+ , A를 받았으니 잘 설정한것 같네요 ^^")]),t._v(" "),e("p",[e("strong",[t._v("https://goodsaem.github.io")])]),t._v(" "),e("p",[e("img",{attrs:{src:r(915),alt:"goodsaem.github.io"}})]),t._v(" "),e("p",[e("strong",[t._v("https://goodsaem.duckdns.org")])]),t._v(" "),e("p",[e("img",{attrs:{src:r(916),alt:"goodsaem.duckdns.org"}})]),t._v(" "),e("h2",{attrs:{id:"_3-aws-account-createion"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-aws-account-createion"}},[t._v("#")]),t._v(" 3. Aws account createion")]),t._v(" "),e("p",[t._v("1년간 사용할 Aws 계정을 생성합니다.")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://aws.amazon.com/ko/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://aws.amazon.com/ko/"),e("OutboundLink")],1),t._v(" 여기에 접속하여 우측상단의 AWS 계정생성 버튼을 클릭합니다.")]),t._v(" "),e("p",[e("img",{attrs:{src:r(917),alt:"problem"}})]),t._v(" "),e("p",[t._v("이메일 주소 암호 계정 이름을 입력합니다.\n"),e("img",{attrs:{src:r(918),alt:"problem"}})]),t._v(" "),e("p",[t._v("연락처 정보는 개인,전체이름 및 전화번호 주소 우편 번호를 입력합니다. 주소는 비용이 발생할경우 청구하는 주소가 되므로 정확히 기재해 주시고\n영문으로 작성하셔야 됩니다. 영문주소 변환은 "),e("a",{attrs:{href:"https://www.jusoen.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.jusoen.com"),e("OutboundLink")],1),t._v(" 여기에서 가능합니다.\n"),e("img",{attrs:{src:r(919),alt:"problem"}})]),t._v(" "),e("p",[t._v("신용카드 정보와 만료날짜 및 신용카드에 적혀있는 카드 소유자 이름을 정확하게 입력하시고 청구지 주소를 선택합니다.\n"),e("img",{attrs:{src:r(920),alt:"problem"}})]),t._v(" "),e("p",[t._v("휴대폰 전화를 입력하여 문자로 확인코드를 받습니다. 보안검사 부분의 보안문자를 보안문자 입력하는 칸에 정확히 입력합니다.\n"),e("img",{attrs:{src:r(921),alt:"problem"}})]),t._v(" "),e("p",[t._v("휴대폰으로 온 문자를 확인하고 코드확인 란에 숫자를 입력하여 다음단계로 진행합니다.\n"),e("img",{attrs:{src:r(922),alt:"problem"}})]),t._v(" "),e("p",[t._v("마지막 단계로 기본지원 - 무료를 선택한후 가입을 완료합니다.\n"),e("img",{attrs:{src:r(923),alt:"problem"}})]),t._v(" "),e("h2",{attrs:{id:"_4-create-free-tier-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-create-free-tier-server"}},[t._v("#")]),t._v(" 4. Create Free Tier Server")]),t._v(" "),e("p",[t._v("Free Tier 서버를 구축을 위해 가입하신 정보로 로그인한후 aws console 버튼을 클릭하신후 서비스 > 모든 서비스 > 컴퓨팅 > EC2 서버를 선택합니다.")]),t._v(" "),e("p",[e("img",{attrs:{src:r(924),alt:"problem"}})]),t._v(" "),e("p",[t._v("EC2 좌측메뉴중 인스턴스를 클릭하고 다시 인스턴스 시작 버튼을 클릭합니다.")]),t._v(" "),e("p",[e("img",{attrs:{src:r(925),alt:"problem"}})]),t._v(" "),e("p",[t._v("프리티어 사용 가능이라고 된 서버가 무료 서버입니다. Ubuntu Server 18.04 LTS(HVM) SSD Volumn type을 선택 합니다.")]),t._v(" "),e("p",[e("img",{attrs:{src:r(926),alt:"problem"}})]),t._v(" "),e("p",[t._v("다음 : 인스턴스 세부정보 구성 버튼을 클릭합니다.")]),t._v(" "),e("p",[e("img",{attrs:{src:r(927),alt:"problem"}})]),t._v(" "),e("p",[t._v("변경없이 다음 : 스토리지 추가를 클릭합니다.")]),t._v(" "),e("p",[e("img",{attrs:{src:r(928),alt:"problem"}})]),t._v(" "),e("p",[e("strong",[t._v("스토리지 추가는 30G까지 무료 입니다.")]),t._v(" 30 이라고 입력하고 다음 : 태그 추가 버튼을 클릭합니다.")]),t._v(" "),e("p",[e("img",{attrs:{src:r(929),alt:"problem"}})]),t._v(" "),e("p",[t._v("태그 추가 버튼을 클릭하여 키와 값에 식별할수 있는 이름을 입력합니다. 그리고 나서 다음 : 보안 그룹 구성 버튼을 클릭합니다.")]),t._v(" "),e("p",[e("img",{attrs:{src:r(930),alt:"problem"}})]),t._v(" "),e("p",[t._v("새 보안 그룹 생성을 선택하고 검토 및 시작 버튼을 클릭합니다.")]),t._v(" "),e("p",[e("img",{attrs:{src:r(931),alt:"problem"}})]),t._v(" "),e("p",[t._v("인스턴스 시작 검토 화면에서 선택한 내용들을 확인합니다. 그리고 나서 시작 하기 버튼을 클릭합니다.")]),t._v(" "),e("p",[e("img",{attrs:{src:r(932),alt:"problem"}})]),t._v(" "),e("p",[t._v("이렇게 시작하고 나면 키페이 생성 화면이 팝업이 되는데 새 키 페어 생성을 선택하고 키페어 이름을 입력하고 키 페이 다운로드 버튼을 클릭하여 로컬 pc에 저장합니다.\n그리고 나서 인서턴스 시작 버튼을 클릭합니다. 여기까지 완료하셨으면 프리티어 서버가 정상 생성되었습니다.")]),t._v(" "),e("p",[e("img",{attrs:{src:r(933),alt:"problem"}})]),t._v(" "),e("p",[t._v("내용이 길어지는 관계로 다음 시간에 서버 세부 설정하는 부분에 대해서 정리하겠습니다.")])])}),[],!1,null,null,null);s.default=a.exports},913:function(t,s,r){t.exports=r.p+"assets/img/z101-1.b5ff0bc4.jpg"},914:function(t,s,r){t.exports=r.p+"assets/img/architecture.704e14bf.jpg"},915:function(t,s,r){t.exports=r.p+"assets/img/goodsaem.github.io.29cf7504.jpg"},916:function(t,s,r){t.exports=r.p+"assets/img/goodsaem.duckdns.org.ad2eb4f9.jpg"},917:function(t,s,r){t.exports=r.p+"assets/img/z101-3.3e052966.jpg"},918:function(t,s,r){t.exports=r.p+"assets/img/z101-4.4fb1fe94.jpg"},919:function(t,s,r){t.exports=r.p+"assets/img/z101-5.25f39124.jpg"},920:function(t,s,r){t.exports=r.p+"assets/img/z101-6.8034d030.jpg"},921:function(t,s,r){t.exports=r.p+"assets/img/z101-7.728dfe4e.jpg"},922:function(t,s,r){t.exports=r.p+"assets/img/z101-8.471f2804.jpg"},923:function(t,s,r){t.exports=r.p+"assets/img/z101-9.a095abbd.jpg"},924:function(t,s,r){t.exports=r.p+"assets/img/z101-10.dbd67102.jpg"},925:function(t,s,r){t.exports=r.p+"assets/img/z101-11.256bb23b.jpg"},926:function(t,s,r){t.exports=r.p+"assets/img/z101-12.b8118b5b.jpg"},927:function(t,s,r){t.exports=r.p+"assets/img/z101-13.1a2f3f94.jpg"},928:function(t,s,r){t.exports=r.p+"assets/img/z101-14.1c3f9ac7.jpg"},929:function(t,s,r){t.exports=r.p+"assets/img/z101-15.3f6c0aae.jpg"},930:function(t,s,r){t.exports=r.p+"assets/img/z101-16.610bd76a.jpg"},931:function(t,s,r){t.exports=r.p+"assets/img/z101-17.37cd7f7a.jpg"},932:function(t,s,r){t.exports=r.p+"assets/img/z101-18.f5ccc95a.jpg"},933:function(t,s,r){t.exports=r.p+"assets/img/z101-19.569d5efb.jpg"}}]);