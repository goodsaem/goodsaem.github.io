(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1053:function(t,e,s){t.exports=s.p+"assets/img/1.bd5dee59.jpg"},1054:function(t,e,s){t.exports=s.p+"assets/img/2.4b393630.jpeg"},1055:function(t,e,s){t.exports=s.p+"assets/img/3.d67a6c99.jpg"},1056:function(t,e,s){t.exports=s.p+"assets/img/4.6afb1105.jpg"},1190:function(t,e,s){"use strict";s.r(e);var a=s(122),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_3-nginx-설치"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-nginx-설치"}},[t._v("#")]),t._v(" "),a("i",{staticClass:"fas fa-server"}),t._v(" 3. Nginx 설치")]),t._v(" "),a("p",[t._v("Linux + Nginx + MariaDB + PHP 조합의 LEMP 설치를 진행하겠습니다. 첫번째로 Nginx 에 대해서 설치 하겠습니다.")]),t._v(" "),a("h2",{attrs:{id:"_1-nginx-점유율"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-nginx-점유율"}},[t._v("#")]),t._v(" 1. Nginx 점유율")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://news.netcraft.com/archives/category/web-server-survey/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://news.netcraft.com/archives/category/web-server-survey/"),a("OutboundLink")],1),t._v("\nnetcrat의 21년 웹서버 점유율을 보면 아래와 같습니다. 비동기로 동작하는 nginx 는 apache 보다 가볍고 속도도 더 빠르다고 합니다.\n아래 데이터를 보더라도 nginx 가 apache 를 앞지르고 있는것으로 보입니다. 그래서 저도 nginx 로 설정하겠습니다.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(1053),alt:"web server"}})]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("Developer")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("December 2020")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Percent")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("January 2021")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Percent")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Change")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("nginx")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("411,191,213")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("33.48%")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("399,330,927")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("33.33%")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("-0.15")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Apache")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("332,420,092")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("27.07%")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("316,046,149")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("26.38%")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("-0.69")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Microsoft")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("97,532,495")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("7.94%")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("89,781,136")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("7.49%")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("-0.45")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("Google")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("46,924,883")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("3.82%")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("46,190,660")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("3.86%")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("0")])])])]),t._v(" "),a("h2",{attrs:{id:"_2-nginx-버전-이해"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-nginx-버전-이해"}},[t._v("#")]),t._v(" 2. Nginx 버전 이해")]),t._v(" "),a("p",[t._v("Nginx는 MainLine 버전과 stable 버전 2가지가 존재 합니다. 메인라이는 새로운 기능 및 업데이트 및 버그 패치가 동시에 진행되고 stable 은\n메인라인에서 버그패치만 진행하는 버전입니다. 메이저 버전을 올리고 싶지 않고 사용하고 싶다면 stable 버전이 좋겠지만 전 최신 기능과 update\n및 버그 픽스가 동시에 이루어지는 mainline으로 설치를 진행하겠습니다.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(1054),alt:"web server"}})]),t._v(" "),a("h2",{attrs:{id:"_3-설치"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-설치"}},[t._v("#")]),t._v(" 3. 설치")]),t._v(" "),a("p",[t._v("Nginx 설치를 위해 의존성 있는 패키지 설치를 진행합니다.")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("goodsaem@goodsaem:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" gnupg2 ca-certificates lsb-release -y\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("메인라인 패키지 리스트를 추가 합니다.")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("goodsaem@goodsaem:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deb http://nginx.org/packages/mainline/ubuntu '),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("lsb_release -cs"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(' nginx"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tee")]),t._v(" /etc/apt/sources.list.d/nginx.list\ndeb http://nginx.org/packages/mainline/ubuntu bionic nginx\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("패키지를 업데이트 합니다.")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" update\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("업데이트시 아래와 같이 NO_PUBKEY "),a("strong",[t._v("ABF5BD827BD9BF62")]),t._v(" 에러가 발생한다면 키를 업데이트 합니다.")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("goodsaem@goodsaem:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" update\nHit:1 http://kr.archive.ubuntu.com/ubuntu bionic InRelease\nGet:2 http://nginx.org/packages/mainline/ubuntu bionic InRelease "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2862")]),t._v(" B"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nErr:2 http://nginx.org/packages/mainline/ubuntu bionic InRelease\n  The following signatures couldn"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'t be verified because the public key is not available: NO_PUBKEY ABF5BD827BD9BF62\nHit:3 http://kr.archive.ubuntu.com/ubuntu bionic-updates InRelease\nHit:4 http://kr.archive.ubuntu.com/ubuntu bionic-backports InRelease\nHit:5 http://kr.archive.ubuntu.com/ubuntu bionic-security InRelease\nReading package lists... Done\nW: GPG error: http://nginx.org/packages/mainline/ubuntu bionic InRelease: The following signatures couldn'")]),t._v("t be verified because the public key is not available: NO_PUBKEY ABF5BD827BD9BF62\nE: The repository "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://nginx.org/packages/mainline/ubuntu bionic InRelease'")]),t._v(" is not signed.\nN: Updating from such a repository can't be "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v(" securely, and is therefore disabled by default.\nN: See apt-secure"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" manpage "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" repository creation and user configuration details.")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("1번 라인과 같이 키를 업데이트 합니다.")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("goodsaem@goodsaem:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" apt-key adv --keyserver keyserver.ubuntu.com --recv-keys ABF5BD827BD9BF62\nExecuting: /tmp/apt-key-gpghome.2V0gKSSHqy/gpg.1.sh --keyserver keyserver.ubuntu.com --recv-keys ABF5BD827BD9BF62\ngpg: key ABF5BD827BD9BF62: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(" signatures not checked due to missing keys\ngpg: key ABF5BD827BD9BF62: public key "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nginx signing key <signing-key@nginx.com>"')]),t._v(" imported\ngpg: Total number processed: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\ngpg:               imported: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")])])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("nginx 를 설치합니다.")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("goodsaem@goodsaem:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" nginx\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("설치된 버전을 확인 합니다. 1.19.8 최신 버전으로 설치 되었습니다.")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("goodsaem@goodsaem:~$ nginx -V\nnginx version: nginx/1.19.8\nbuilt by gcc "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.5")]),t._v(".0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Ubuntu "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.5")]),t._v(".0-3ubuntu1~18.04"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \nbuilt with OpenSSL "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(".1  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" Sep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("\nTLS SNI support enabled\nconfigure arguments: --prefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/nginx --sbin-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/sbin/nginx --modules-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/lib/nginx/modules --conf-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/nginx/nginx.conf --error-log-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/log/nginx/error.log --http-log-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/log/nginx/access.log --pid-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/run/nginx.pid --lock-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/run/nginx.lock --http-client-body-temp-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/cache/nginx/client_temp --http-proxy-temp-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/cache/nginx/proxy_temp --http-fastcgi-temp-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/cache/nginx/uwsgi_temp --http-scgi-temp-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/cache/nginx/scgi_temp --user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx --group"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-cc-opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-g -O2 -fdebug-prefix-map=/data/builder/debuild/nginx-1.19.8/debian/debuild-base/nginx-1.19.8=. -fstack-protector-strong -Wformat -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fPIC'")]),t._v(" --with-ld-opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now -Wl,--as-needed -pie'")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h2",{attrs:{id:"_4-nginx-start"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-nginx-start"}},[t._v("#")]),t._v(" 4. Nginx start")]),t._v(" "),a("p",[t._v("아래 명령어를 입력하여 nginx 를 시작합니다.")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("goodsaem@goodsaem:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl start nginx\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("virtualbox 설정 네트워크 고급 포트 포워딩에서 80 과 443 포트를 아래와 같이 추가합니다.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(1055),alt:"img"}})]),t._v(" "),a("p",[t._v("웹브라우저에서 "),a("a",{attrs:{href:"http://localhost",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost"),a("OutboundLink")],1),t._v(" 접속해서 아래와 같은 화면이 나오면 설정 완료 입니다.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(1056),alt:"img"}})])])}),[],!1,null,null,null);e.default=n.exports}}]);