(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{1229:function(s,a,t){"use strict";t.r(a);var n=t(119),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_7-mariadb-install"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-mariadb-install"}},[s._v("#")]),s._v(" "),t("i",{staticClass:"fas fa-server"}),s._v(" 7. MariaDB install")]),s._v(" "),t("p",[s._v("mariadb 설치를 진행하겠습니다.")]),s._v(" "),t("p",[s._v("우선 repository 부터 아래와 같이 설정합니다.")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ubuntu@goodsaem:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" software-properties-common\nubuntu@goodsaem:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-key adv --fetch-keys "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://mariadb.org/mariadb_release_signing_key.asc'")]),s._v("\nubuntu@goodsaem:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" add-apt-repository "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deb [arch=amd64,arm64,ppc64el] https://mirror.yongbok.net/mariadb/repo/10.5/ubuntu bionic main'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("패키지를 업데이트한후 mariadb 설치를 진행합니다.")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ubuntu@goodsaem:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update\nubuntu@goodsaem:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mariadb-server -y\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"mariadb-seucre-install"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mariadb-seucre-install"}},[s._v("#")]),s._v(" mariadb seucre install")]),s._v(" "),t("p",[s._v("마리아 db를 설치하고 나면 디비 보안 관련 설정을 진행해야 합니다.")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ubuntu@goodsaem:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mysql_secure_installation\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("중간에 불필요한 부분은 삭제 했습니다.")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("1 라인")]),s._v(" root 유저가 사용할 패스워드를 입력합니다.")]),s._v(" "),t("li",[t("strong",[s._v("4 라인")]),s._v(" unix socket 인증방식 사용여부는 n 으로 지정해 주세요(root 쉘인증이 기본 사용됩니다.)")]),s._v(" "),t("li",[t("strong",[s._v("8,9,10 라인")]),s._v(" root passwor를 변경합니다.")]),s._v(" "),t("li",[t("strong",[s._v("15 라인")]),s._v(" 익명 사용자를 삭제 합니다.")]),s._v(" "),t("li",[t("strong",[s._v("17 라인")]),s._v(" root의 원격접속을 막습니다. root 는 항상 로컬에서만 접속 가능합니다.")]),s._v(" "),t("li",[t("strong",[s._v("19 라인")]),s._v(" test 데이터 베이스를 삭제 합니다.")]),s._v(" "),t("li",[t("strong",[s._v("25 라인")]),s._v(" 권한에 대한 리로드를 진행합니다. y를 입력해주세요")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("Enter current password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("enter "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\nOK, successfully used password, moving on…\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nYou already have your root account protected, so you can safely answer "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'n'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nSwitch to unix_socket authentication "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nChange the root password? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" y\nNew password:\nRe-enter new password:\nPassword updated successfully"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nReloading privilege tables"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n… Success"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nRemove anonymous users? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" y\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nDisallow root login remotely? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" y\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nRemove "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" database and access to it? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" y\n- Dropping "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" database…\n  … Success"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n- Removing privileges on "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" database…\n  … Success"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".  \nReload privilege tables now? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" y\n… Success"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("h4",{attrs:{id:"mariadb-connect"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mariadb-connect"}},[s._v("#")]),s._v(" mariadb connect")]),s._v(" "),t("p",[s._v("아래 명령어를 입력하여 mariadb 에 접속합니다. 성공적으로 접속되었습니다.")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ubuntu@goodsaem:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mysql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("Welcome to the MariaDB monitor.  Commands end with "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" or "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("g.\nYour MariaDB connection "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("156")]),s._v("\nServer version: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.5")]),s._v(".9-MariaDB-1:10.5.9+maria~bionic-log mariadb.org binary distribution\n\nCopyright "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(", Oracle, MariaDB Corporation Ab and others.\n\nType "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'help;'")]),s._v(" or "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\h'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" help. Type "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'"),t("span",{pre:!0,attrs:{class:"token entity",title:"\\c"}},[s._v("\\c")]),s._v("'")]),s._v(" to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("clear")]),s._v(" the current input statement.\n\nMariaDB "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h4",{attrs:{id:"mariadb-config"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mariadb-config"}},[s._v("#")]),s._v(" mariadb config")]),s._v(" "),t("p",[s._v("마리아 db 설정을 진행하겠습니다. 마리아 디비 설정 파일이 있는곳으로 이동하여 설정 파일을 수정합니다.")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ubuntu@goodsaem:~$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/mysql/mariadb.conf.d\nubuntu@goodsaem:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("-server.cnf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("아래 설정을 추가합니다.")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nserver-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nlog_bin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" binlog\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("expire_logs_days")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\ninnodb_buffer_pool_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 384M\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_file_per_table")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("TRUE\ncharacter-set-client-handshake"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("OFF\nskip-character-set-client-handshake\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("max_allowed_packet")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("500M\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("init_connect")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("SET collation_connection "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8mb4_general_ci\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("init_connect")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("SET NAMES utf8mb4\ncharacter-set-server "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8mb4\ncollation-server "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8mb4_general_ci\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("설정된 값이 적용되도록 마리아 디비를 재시작 합니다.")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ubuntu@goodsaem:/etc/mysql/mariadb.conf.d$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart mysql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);